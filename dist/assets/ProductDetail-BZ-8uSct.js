import{j as e}from"./ui-DskC_GZ4.js";import{r as c}from"./vendor-BlHcAAdO.js";import{W as j,y as g,K as N,H as i,B as l,T as v,V as b}from"./index-fU-TRYU7.js";import"./supabase-C9Ps4N4y.js";import"./charts-DDg0wrp5.js";const P=()=>{const{id:a}=j(),[s,x]=c.useState(null),[h,o]=c.useState(!0),[r,n]=c.useState(1),{addToCart:p}=g(),{toast:d}=N();c.useEffect(()=>{(async()=>{if(a)try{o(!0);const{data:t,error:u}=await v.from("store_products").select(`
            *,
            store_stores (
              id,
              name,
              logo_url
            )
          `).eq("id",a).single();if(u)throw u;x(t)}catch(t){b.error("Error fetching product",{error:t,productId:a}),d({title:"Error",description:"Failed to load product details",variant:"destructive"})}finally{o(!1)}})()},[a,d]);const f=()=>{s&&p(s,r)};return h?e.jsx("div",{className:"container mx-auto py-10 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s?e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[s.images&&s.images.length>0?e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg border bg-muted",children:e.jsx("img",{src:s.thumbnail||s.images[0],alt:s.name,className:"object-cover w-full h-full"})}):e.jsx("div",{className:"aspect-square flex items-center justify-center rounded-lg border bg-muted",children:e.jsx("span",{className:"text-muted-foreground",children:"No image available"})}),s.images&&s.images.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.images.map((m,t)=>e.jsx("div",{className:"aspect-square rounded-md overflow-hidden border",children:e.jsx("img",{src:m,alt:`${s.name} ${t+1}`,className:"object-cover w-full h-full"})},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.name}),s.store_stores&&e.jsxs("p",{className:"text-muted-foreground",children:["Sold by ",s.store_stores.name]})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:s.sale_price?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-3xl font-bold",children:i(s.sale_price)}),e.jsx("span",{className:"text-muted-foreground line-through",children:i(s.price)}),e.jsxs("span",{className:"text-green-600 text-sm font-medium",children:["Save ",i(s.price-s.sale_price)]})]}):e.jsx("span",{className:"text-3xl font-bold",children:i(s.price)})}),s.description&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.description})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"outline",size:"icon",onClick:()=>n(Math.max(1,r-1)),children:"-"}),e.jsx("span",{className:"w-12 text-center",children:r}),e.jsx(l,{variant:"outline",size:"icon",onClick:()=>n(r+1),children:"+"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{onClick:f,disabled:s.stock<=0,className:"w-full",children:s.stock<=0?"Out of Stock":"Add to Cart"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.stock>0?`${s.stock} in stock`:"Currently unavailable"})]})]})]})}):e.jsxs("div",{className:"container mx-auto py-10 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product not found"}),e.jsx("p",{children:"The product you're looking for doesn't exist or has been removed."})]})};export{P as default};
