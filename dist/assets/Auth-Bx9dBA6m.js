import{j as e}from"./ui-DskC_GZ4.js";import{r}from"./vendor-BlHcAAdO.js";import{K as A,N as E,k as q,_ as F,Y as i,P as n,B as L,q as k,T as x}from"./index-fU-TRYU7.js";import"./supabase-C9Ps4N4y.js";import"./charts-DDg0wrp5.js";const _=()=>{const[l,v]=r.useState(""),[c,j]=r.useState(""),[d,N]=r.useState(""),[u,y]=r.useState(""),[h,b]=r.useState(""),[m,f]=r.useState(!1),[o,w]=r.useState(!0),{toast:p}=A(),g=E(),{t:s}=q();r.useEffect(()=>{(async()=>{const{data:a}=await x.auth.getSession();a.session&&g("/dashboard")})()},[g]);const S=async t=>{t.preventDefault(),f(!0);try{if(o){const{error:a}=await x.auth.signInWithPassword({email:l,password:c});if(a)throw a;p({title:s("common.success"),description:s("auth.loginSuccess")}),g("/dashboard")}else{if(!d||!u||!h)throw new Error(s("form.required"));const{error:a}=await x.auth.signUp({email:l,password:c,options:{data:{first_name:d,last_name:u,phone:h}}});if(a)throw a;p({title:s("common.success"),description:s("auth.signupSuccess")})}}catch(a){p({title:s("common.error"),description:a.message||s("common.error"),variant:"destructive"})}finally{f(!1)}};return e.jsx(F,{children:e.jsx("div",{className:"container mx-auto py-16 px-4",children:e.jsxs("div",{className:"max-w-md mx-auto bg-card rounded-xl shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-[#9b87f5] to-[#7E69AB] bg-clip-text text-transparent inline-block w-full",children:s(o?"auth.login":"auth.createAccount")}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:s("settings.email")}),e.jsx(n,{id:"email",type:"email",value:l,onChange:t=>v(t.target.value),placeholder:s("placeholder.email"),required:!0})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"firstName",children:s("settings.firstName")}),e.jsx(n,{id:"firstName",type:"text",value:d,onChange:t=>N(t.target.value),placeholder:s("placeholder.firstName"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"lastName",children:s("settings.lastName")}),e.jsx(n,{id:"lastName",type:"text",value:u,onChange:t=>y(t.target.value),placeholder:s("placeholder.lastName"),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:s("settings.phone")}),e.jsx(n,{id:"phone",type:"tel",value:h,onChange:t=>b(t.target.value),placeholder:s("placeholder.phone"),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:s("settings.newPassword")}),e.jsx(n,{id:"password",type:"password",value:c,onChange:t=>j(t.target.value),placeholder:s("placeholder.password"),required:!0})]}),e.jsxs(L,{type:"submit",className:k("w-full relative group overflow-hidden",m?"opacity-80":""),style:{background:"#9b87f5",color:"white"},disabled:m,children:[e.jsx("span",{className:"relative z-10",children:s(m?"auth.processing":o?"auth.login":"auth.signup")}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#9b87f5] to-[#7E69AB] opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:()=>w(!o),className:"text-[#9b87f5] hover:text-[#7E69AB] hover:underline transition-colors",children:s(o?"auth.noAccount":"auth.alreadyHaveAccount")})})]})})})};export{_ as default};
