import{j as e}from"./ui-DskC_GZ4.js";import{r as c}from"./vendor-BlHcAAdO.js";import{K as p,k as d,B as l}from"./index-fU-TRYU7.js";import{M as g}from"./map-pin-CaB-Fh_N.js";import"./supabase-C9Ps4N4y.js";import"./charts-DDg0wrp5.js";const w=()=>{const{toast:i}=p(),{t}=d(),[u,s]=c.useState(!0);c.useEffect(()=>{(async()=>{try{navigator.permissions&&navigator.permissions.query&&(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&s(!1)}catch(r){console.error("Error checking permission:",r)}})();const o=setTimeout(()=>{m()},5e3);return()=>clearTimeout(o)},[]);const m=()=>{if(!navigator.geolocation){i({title:t("location.notSupported"),description:t("location.browserNoSupport"),variant:"destructive"});return}i({title:t("location.requestingPermission"),description:t("location.permissionExplanation"),action:e.jsx(l,{variant:"default",onClick:n,className:"bg-pet-primary hover:bg-pet-secondary",children:t("location.allowAccess")})})},n=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{i({title:t("location.accessGranted"),description:t("location.thankYou"),variant:"default"}),s(!1)},a=>{let o="";switch(a.code){case 1:o=t("location.permissionDenied");break;case 2:o=t("location.locationUnavailable");break;case 3:o=t("location.timeout");break;default:o=t("location.unknownError")}i({title:t("location.error"),description:o,variant:"destructive"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return u?e.jsx("div",{className:"fixed bottom-20 md:bottom-6 right-6 z-50",children:e.jsxs(l,{onClick:n,className:"bg-pet-primary hover:bg-pet-secondary text-white shadow-lg rounded-full p-3 h-auto flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden md:inline",children:t("location.enableLocation")})]})}):null};export{w as default};
