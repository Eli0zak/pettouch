import{n as ne,q as M,r as ae,j as e,o as L,s as I,w as Z,t as et,v as tt,x as rt,y as ke,z as _e,A as st,p as ot,u as Q}from"./ui-DskC_GZ4.js";import{r as i,R as H}from"./vendor-BlHcAAdO.js";import{q as Y,C as hr,x as fr,y as nt,z as at,A as lt,B as O,D as Se,E as it,F as ct,G as dt,L as Ye,H as de,X as mr,I as xr,k as pr,K as gr,N as vr,O as br,P as wr,Q as jr,R as ue,T as W,V as he}from"./index-fU-TRYU7.js";import{C as Ue,b as Xe,a as Ge,e as Qe,c as Sr,d as Cr}from"./card-BKNPTKQ9.js";import{T as yr,a as Nr,b as Ce,c as ye}from"./tabs-DPPu6Y5N.js";import{S as Pr,a as Rr,b as Ar,c as Er,d as te}from"./select-CjVjgBc2.js";import{T as kr}from"./trash-2-C636hku7.js";import{P as _r,a as Tr,b as fe,c as Ir,d as Dr,e as Lr,f as Mr}from"./pagination-lN0m_bYc.js";import{F as Or}from"./filter-Y_kipbuI.js";import{H as Je}from"./heart-C2PLtpQF.js";import{S as Hr}from"./star-DqQZDmNS.js";import"./supabase-C9Ps4N4y.js";import"./charts-DDg0wrp5.js";var Te="Checkbox",[Vr,to]=ne(Te),[Fr,zr]=Vr(Te),ut=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:o,checked:n,defaultChecked:a,required:l,disabled:c,value:u="on",onCheckedChange:d,form:m,...h}=t,[x,p]=i.useState(null),j=M(s,b=>p(b)),v=i.useRef(!1),S=x?m||!!x.closest("form"):!0,[g=!1,w]=ae({prop:n,defaultProp:a,onChange:d}),P=i.useRef(g);return i.useEffect(()=>{const b=x==null?void 0:x.form;if(b){const R=()=>w(P.current);return b.addEventListener("reset",R),()=>b.removeEventListener("reset",R)}},[x,w]),e.jsxs(Fr,{scope:r,state:g,disabled:c,children:[e.jsx(L.button,{type:"button",role:"checkbox","aria-checked":K(g)?"mixed":g,"aria-required":l,"data-state":mt(g),"data-disabled":c?"":void 0,disabled:c,value:u,...h,ref:j,onKeyDown:I(t.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:I(t.onClick,b=>{w(R=>K(R)?!0:!R),S&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),S&&e.jsx($r,{control:x,bubbles:!v.current,name:o,value:u,checked:g,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:K(a)?!1:a})]})});ut.displayName=Te;var ht="CheckboxIndicator",ft=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:o,...n}=t,a=zr(ht,r);return e.jsx(Z,{present:o||K(a.state)||a.state===!0,children:e.jsx(L.span,{"data-state":mt(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});ft.displayName=ht;var $r=t=>{const{control:s,checked:r,bubbles:o=!0,defaultChecked:n,...a}=t,l=i.useRef(null),c=et(r),u=tt(s);i.useEffect(()=>{const m=l.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const j=new Event("click",{bubbles:o});m.indeterminate=K(r),p.call(m,K(r)?!1:r),m.dispatchEvent(j)}},[c,r,o]);const d=i.useRef(K(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??d.current,...a,tabIndex:-1,ref:l,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function K(t){return t==="indeterminate"}function mt(t){return K(t)?"indeterminate":t?"checked":"unchecked"}var xt=ut,Br=ft;const G=i.forwardRef(({className:t,...s},r)=>e.jsx(xt,{ref:r,className:Y("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Br,{className:Y("flex items-center justify-center text-current"),children:e.jsx(hr,{className:"h-4 w-4"})})}));G.displayName=xt.displayName;var pt=["PageUp","PageDown"],gt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ee="Slider",[Ne,qr,Wr]=rt(ee),[bt,ro]=ne(ee,[Wr]),[Kr,ge]=bt(ee),wt=i.forwardRef((t,s)=>{const{name:r,min:o=0,max:n=100,step:a=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[o],value:m,onValueChange:h=()=>{},onValueCommit:x=()=>{},inverted:p=!1,form:j,...v}=t,S=i.useRef(new Set),g=i.useRef(0),P=l==="horizontal"?Yr:Ur,[b=[],R]=ae({prop:m,defaultProp:d,onChange:A=>{var z;(z=[...S.current][g.current])==null||z.focus(),h(A)}}),T=i.useRef(b);function _(A){const F=Zr(b,A);k(A,F)}function E(A){k(A,g.current)}function C(){const A=T.current[g.current];b[g.current]!==A&&x(b)}function k(A,F,{commit:z}={commit:!1}){const le=ss(a),U=os(Math.round((A-o)/a)*a+o,le),X=_e(U,[o,n]);R((f=[])=>{const N=Qr(f,X,F);if(rs(N,u*a)){g.current=N.indexOf(X);const D=String(N)!==String(f);return D&&z&&x(N),D?N:f}else return f})}return e.jsx(Kr,{scope:t.__scopeSlider,name:r,disabled:c,min:o,max:n,valueIndexToChangeRef:g,thumbs:S.current,values:b,orientation:l,form:j,children:e.jsx(Ne.Provider,{scope:t.__scopeSlider,children:e.jsx(Ne.Slot,{scope:t.__scopeSlider,children:e.jsx(P,{"aria-disabled":c,"data-disabled":c?"":void 0,...v,ref:s,onPointerDown:I(v.onPointerDown,()=>{c||(T.current=b)}),min:o,max:n,inverted:p,onSlideStart:c?void 0:_,onSlideMove:c?void 0:E,onSlideEnd:c?void 0:C,onHomeKeyDown:()=>!c&&k(o,0,{commit:!0}),onEndKeyDown:()=>!c&&k(n,b.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:F})=>{if(!c){const U=pt.includes(A.key)||A.shiftKey&&gt.includes(A.key)?10:1,X=g.current,f=b[X],N=a*U*F;k(f+N,X,{commit:!0})}}})})})})});wt.displayName=ee;var[jt,St]=bt(ee,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Yr=i.forwardRef((t,s)=>{const{min:r,max:o,dir:n,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...m}=t,[h,x]=i.useState(null),p=M(s,P=>x(P)),j=i.useRef(),v=ke(n),S=v==="ltr",g=S&&!a||!S&&a;function w(P){const b=j.current||h.getBoundingClientRect(),R=[0,b.width],_=Ie(R,g?[r,o]:[o,r]);return j.current=b,_(P-b.left)}return e.jsx(jt,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:e.jsx(Ct,{dir:v,"data-orientation":"horizontal",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:P=>{const b=w(P.clientX);l==null||l(b)},onSlideMove:P=>{const b=w(P.clientX);c==null||c(b)},onSlideEnd:()=>{j.current=void 0,u==null||u()},onStepKeyDown:P=>{const R=vt[g?"from-left":"from-right"].includes(P.key);d==null||d({event:P,direction:R?-1:1})}})})}),Ur=i.forwardRef((t,s)=>{const{min:r,max:o,inverted:n,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,m=i.useRef(null),h=M(s,m),x=i.useRef(),p=!n;function j(v){const S=x.current||m.current.getBoundingClientRect(),g=[0,S.height],P=Ie(g,p?[o,r]:[r,o]);return x.current=S,P(v-S.top)}return e.jsx(jt,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:e.jsx(Ct,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const S=j(v.clientY);a==null||a(S)},onSlideMove:v=>{const S=j(v.clientY);l==null||l(S)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:v=>{const g=vt[p?"from-bottom":"from-top"].includes(v.key);u==null||u({event:v,direction:g?-1:1})}})})}),Ct=i.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:o,onSlideMove:n,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...d}=t,m=ge(ee,r);return e.jsx(L.span,{...d,ref:s,onKeyDown:I(t.onKeyDown,h=>{h.key==="Home"?(l(h),h.preventDefault()):h.key==="End"?(c(h),h.preventDefault()):pt.concat(gt).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:I(t.onPointerDown,h=>{const x=h.target;x.setPointerCapture(h.pointerId),h.preventDefault(),m.thumbs.has(x)?x.focus():o(h)}),onPointerMove:I(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&n(h)}),onPointerUp:I(t.onPointerUp,h=>{const x=h.target;x.hasPointerCapture(h.pointerId)&&(x.releasePointerCapture(h.pointerId),a(h))})})}),yt="SliderTrack",Nt=i.forwardRef((t,s)=>{const{__scopeSlider:r,...o}=t,n=ge(yt,r);return e.jsx(L.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...o,ref:s})});Nt.displayName=yt;var Pe="SliderRange",Pt=i.forwardRef((t,s)=>{const{__scopeSlider:r,...o}=t,n=ge(Pe,r),a=St(Pe,r),l=i.useRef(null),c=M(s,l),u=n.values.length,d=n.values.map(x=>At(x,n.min,n.max)),m=u>1?Math.min(...d):0,h=100-Math.max(...d);return e.jsx(L.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...o,ref:c,style:{...t.style,[a.startEdge]:m+"%",[a.endEdge]:h+"%"}})});Pt.displayName=Pe;var Re="SliderThumb",Rt=i.forwardRef((t,s)=>{const r=qr(t.__scopeSlider),[o,n]=i.useState(null),a=M(s,c=>n(c)),l=i.useMemo(()=>o?r().findIndex(c=>c.ref.current===o):-1,[r,o]);return e.jsx(Xr,{...t,ref:a,index:l})}),Xr=i.forwardRef((t,s)=>{const{__scopeSlider:r,index:o,name:n,...a}=t,l=ge(Re,r),c=St(Re,r),[u,d]=i.useState(null),m=M(s,w=>d(w)),h=u?l.form||!!u.closest("form"):!0,x=tt(u),p=l.values[o],j=p===void 0?0:At(p,l.min,l.max),v=Jr(o,l.values.length),S=x==null?void 0:x[c.size],g=S?es(S,j,c.direction):0;return i.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${j}% + ${g}px)`},children:[e.jsx(Ne.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(L.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":l.min,"aria-valuenow":p,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:m,style:p===void 0?{display:"none"}:t.style,onFocus:I(t.onFocus,()=>{l.valueIndexToChangeRef.current=o})})}),h&&e.jsx(Gr,{name:n??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:p},o)]})});Rt.displayName=Re;var Gr=t=>{const{value:s,...r}=t,o=i.useRef(null),n=et(s);return i.useEffect(()=>{const a=o.current,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(n!==s&&u){const d=new Event("input",{bubbles:!0});u.call(a,s),a.dispatchEvent(d)}},[n,s]),e.jsx("input",{style:{display:"none"},...r,ref:o,defaultValue:s})};function Qr(t=[],s,r){const o=[...t];return o[r]=s,o.sort((n,a)=>n-a)}function At(t,s,r){const a=100/(r-s)*(t-s);return _e(a,[0,100])}function Jr(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Zr(t,s){if(t.length===1)return 0;const r=t.map(n=>Math.abs(n-s)),o=Math.min(...r);return r.indexOf(o)}function es(t,s,r){const o=t/2,a=Ie([0,50],[0,o]);return(o-a(s)*r)*r}function ts(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function rs(t,s){if(s>0){const r=ts(t);return Math.min(...r)>=s}return!0}function Ie(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const o=(s[1]-s[0])/(t[1]-t[0]);return s[0]+o*(r-t[0])}}function ss(t){return(String(t).split(".")[1]||"").length}function os(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var Et=wt,ns=Nt,as=Pt,ls=Rt;const Ae=i.forwardRef(({className:t,...s},r)=>e.jsxs(Et,{ref:r,className:Y("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(ns,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(as,{className:"absolute h-full bg-primary"})}),e.jsx(ls,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ae.displayName=Et.displayName;var De="Collapsible",[is,kt]=ne(De),[cs,Le]=is(De),_t=i.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:o,defaultOpen:n,disabled:a,onOpenChange:l,...c}=t,[u=!1,d]=ae({prop:o,defaultProp:n,onChange:l});return e.jsx(cs,{scope:r,disabled:a,contentId:st(),open:u,onOpenToggle:i.useCallback(()=>d(m=>!m),[d]),children:e.jsx(L.div,{"data-state":Oe(u),"data-disabled":a?"":void 0,...c,ref:s})})});_t.displayName=De;var Tt="CollapsibleTrigger",It=i.forwardRef((t,s)=>{const{__scopeCollapsible:r,...o}=t,n=Le(Tt,r);return e.jsx(L.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":Oe(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...o,ref:s,onClick:I(t.onClick,n.onOpenToggle)})});It.displayName=Tt;var Me="CollapsibleContent",Dt=i.forwardRef((t,s)=>{const{forceMount:r,...o}=t,n=Le(Me,t.__scopeCollapsible);return e.jsx(Z,{present:r||n.open,children:({present:a})=>e.jsx(ds,{...o,ref:s,present:a})})});Dt.displayName=Me;var ds=i.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:o,children:n,...a}=t,l=Le(Me,r),[c,u]=i.useState(o),d=i.useRef(null),m=M(s,d),h=i.useRef(0),x=h.current,p=i.useRef(0),j=p.current,v=l.open||c,S=i.useRef(v),g=i.useRef();return i.useEffect(()=>{const w=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(w)},[]),ot(()=>{const w=d.current;if(w){g.current=g.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const P=w.getBoundingClientRect();h.current=P.height,p.current=P.width,S.current||(w.style.transitionDuration=g.current.transitionDuration,w.style.animationName=g.current.animationName),u(o)}},[l.open,o]),e.jsx(L.div,{"data-state":Oe(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!v,...a,ref:m,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:v&&n})});function Oe(t){return t?"open":"closed"}var us=_t,hs=It,fs=Dt,q="Accordion",ms=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[He,xs,ps]=rt(q),[ve,so]=ne(q,[ps,kt]),Ve=kt(),Lt=H.forwardRef((t,s)=>{const{type:r,...o}=t,n=o,a=o;return e.jsx(He.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?e.jsx(ws,{...a,ref:s}):e.jsx(bs,{...n,ref:s})})});Lt.displayName=q;var[Mt,gs]=ve(q),[Ot,vs]=ve(q,{collapsible:!1}),bs=H.forwardRef((t,s)=>{const{value:r,defaultValue:o,onValueChange:n=()=>{},collapsible:a=!1,...l}=t,[c,u]=ae({prop:r,defaultProp:o,onChange:n});return e.jsx(Mt,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:u,onItemClose:H.useCallback(()=>a&&u(""),[a,u]),children:e.jsx(Ot,{scope:t.__scopeAccordion,collapsible:a,children:e.jsx(Ht,{...l,ref:s})})})}),ws=H.forwardRef((t,s)=>{const{value:r,defaultValue:o,onValueChange:n=()=>{},...a}=t,[l=[],c]=ae({prop:r,defaultProp:o,onChange:n}),u=H.useCallback(m=>c((h=[])=>[...h,m]),[c]),d=H.useCallback(m=>c((h=[])=>h.filter(x=>x!==m)),[c]);return e.jsx(Mt,{scope:t.__scopeAccordion,value:l,onItemOpen:u,onItemClose:d,children:e.jsx(Ot,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Ht,{...a,ref:s})})})}),[js,be]=ve(q),Ht=H.forwardRef((t,s)=>{const{__scopeAccordion:r,disabled:o,dir:n,orientation:a="vertical",...l}=t,c=H.useRef(null),u=M(c,s),d=xs(r),h=ke(n)==="ltr",x=I(t.onKeyDown,p=>{var E;if(!ms.includes(p.key))return;const j=p.target,v=d().filter(C=>{var k;return!((k=C.ref.current)!=null&&k.disabled)}),S=v.findIndex(C=>C.ref.current===j),g=v.length;if(S===-1)return;p.preventDefault();let w=S;const P=0,b=g-1,R=()=>{w=S+1,w>b&&(w=P)},T=()=>{w=S-1,w<P&&(w=b)};switch(p.key){case"Home":w=P;break;case"End":w=b;break;case"ArrowRight":a==="horizontal"&&(h?R():T());break;case"ArrowDown":a==="vertical"&&R();break;case"ArrowLeft":a==="horizontal"&&(h?T():R());break;case"ArrowUp":a==="vertical"&&T();break}const _=w%g;(E=v[_].ref.current)==null||E.focus()});return e.jsx(js,{scope:r,disabled:o,direction:n,orientation:a,children:e.jsx(He.Slot,{scope:r,children:e.jsx(L.div,{...l,"data-orientation":a,ref:u,onKeyDown:o?void 0:x})})})}),me="AccordionItem",[Ss,Fe]=ve(me),Vt=H.forwardRef((t,s)=>{const{__scopeAccordion:r,value:o,...n}=t,a=be(me,r),l=gs(me,r),c=Ve(r),u=st(),d=o&&l.value.includes(o)||!1,m=a.disabled||t.disabled;return e.jsx(Ss,{scope:r,open:d,disabled:m,triggerId:u,children:e.jsx(us,{"data-orientation":a.orientation,"data-state":Wt(d),...c,...n,ref:s,disabled:m,open:d,onOpenChange:h=>{h?l.onItemOpen(o):l.onItemClose(o)}})})});Vt.displayName=me;var Ft="AccordionHeader",zt=H.forwardRef((t,s)=>{const{__scopeAccordion:r,...o}=t,n=be(q,r),a=Fe(Ft,r);return e.jsx(L.h3,{"data-orientation":n.orientation,"data-state":Wt(a.open),"data-disabled":a.disabled?"":void 0,...o,ref:s})});zt.displayName=Ft;var Ee="AccordionTrigger",$t=H.forwardRef((t,s)=>{const{__scopeAccordion:r,...o}=t,n=be(q,r),a=Fe(Ee,r),l=vs(Ee,r),c=Ve(r);return e.jsx(He.ItemSlot,{scope:r,children:e.jsx(hs,{"aria-disabled":a.open&&!l.collapsible||void 0,"data-orientation":n.orientation,id:a.triggerId,...c,...o,ref:s})})});$t.displayName=Ee;var Bt="AccordionContent",qt=H.forwardRef((t,s)=>{const{__scopeAccordion:r,...o}=t,n=be(q,r),a=Fe(Bt,r),l=Ve(r);return e.jsx(fs,{role:"region","aria-labelledby":a.triggerId,"data-orientation":n.orientation,...l,...o,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});qt.displayName=Bt;function Wt(t){return t?"open":"closed"}var Cs=Lt,ys=Vt,Ns=zt,Kt=$t,Yt=qt;const Ps=Cs,re=i.forwardRef(({className:t,...s},r)=>e.jsx(ys,{ref:r,className:Y("border-b",t),...s}));re.displayName="AccordionItem";const se=i.forwardRef(({className:t,children:s,...r},o)=>e.jsx(Ns,{className:"flex",children:e.jsxs(Kt,{ref:o,className:Y("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[s,e.jsx(fr,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));se.displayName=Kt.displayName;const oe=i.forwardRef(({className:t,children:s,...r},o)=>e.jsx(Yt,{ref:o,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:e.jsx("div",{className:Y("pb-4 pt-0",t),children:s})}));oe.displayName=Yt.displayName;function Rs(t,s){return i.useReducer((r,o)=>s[r][o]??r,t)}var ze="ScrollArea",[Ut,oo]=ne(ze),[As,V]=Ut(ze),Xt=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:o="hover",dir:n,scrollHideDelay:a=600,...l}=t,[c,u]=i.useState(null),[d,m]=i.useState(null),[h,x]=i.useState(null),[p,j]=i.useState(null),[v,S]=i.useState(null),[g,w]=i.useState(0),[P,b]=i.useState(0),[R,T]=i.useState(!1),[_,E]=i.useState(!1),C=M(s,A=>u(A)),k=ke(n);return e.jsx(As,{scope:r,type:o,dir:k,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:m,content:h,onContentChange:x,scrollbarX:p,onScrollbarXChange:j,scrollbarXEnabled:R,onScrollbarXEnabledChange:T,scrollbarY:v,onScrollbarYChange:S,scrollbarYEnabled:_,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:b,children:e.jsx(L.div,{dir:k,...l,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});Xt.displayName=ze;var Gt="ScrollAreaViewport",Qt=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:o,asChild:n,nonce:a,...l}=t,c=V(Gt,r),u=i.useRef(null),d=M(s,u,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),e.jsx(L.div,{"data-radix-scroll-area-viewport":"",...l,asChild:n,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Hs({asChild:n,children:o},m=>e.jsx("div",{"data-radix-scroll-area-content":"",ref:c.onContentChange,style:{minWidth:c.scrollbarXEnabled?"fit-content":void 0},children:m}))})]})});Qt.displayName=Gt;var B="ScrollAreaScrollbar",$e=i.forwardRef((t,s)=>{const{forceMount:r,...o}=t,n=V(B,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=n,c=t.orientation==="horizontal";return i.useEffect(()=>(c?a(!0):l(!0),()=>{c?a(!1):l(!1)}),[c,a,l]),n.type==="hover"?e.jsx(Es,{...o,ref:s,forceMount:r}):n.type==="scroll"?e.jsx(ks,{...o,ref:s,forceMount:r}):n.type==="auto"?e.jsx(Jt,{...o,ref:s,forceMount:r}):n.type==="always"?e.jsx(Be,{...o,ref:s}):null});$e.displayName=B;var Es=i.forwardRef((t,s)=>{const{forceMount:r,...o}=t,n=V(B,t.__scopeScrollArea),[a,l]=i.useState(!1);return i.useEffect(()=>{const c=n.scrollArea;let u=0;if(c){const d=()=>{window.clearTimeout(u),l(!0)},m=()=>{u=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(Z,{present:r||a,children:e.jsx(Jt,{"data-state":a?"visible":"hidden",...o,ref:s})})}),ks=i.forwardRef((t,s)=>{const{forceMount:r,...o}=t,n=V(B,t.__scopeScrollArea),a=t.orientation==="horizontal",l=je(()=>u("SCROLL_END"),100),[c,u]=Rs("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>u("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,n.scrollHideDelay,u]),i.useEffect(()=>{const d=n.viewport,m=a?"scrollLeft":"scrollTop";if(d){let h=d[m];const x=()=>{const p=d[m];h!==p&&(u("SCROLL"),l()),h=p};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[n.viewport,a,u,l]),e.jsx(Z,{present:r||c!=="hidden",children:e.jsx(Be,{"data-state":c==="hidden"?"hidden":"visible",...o,ref:s,onPointerEnter:I(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:I(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Jt=i.forwardRef((t,s)=>{const r=V(B,t.__scopeScrollArea),{forceMount:o,...n}=t,[a,l]=i.useState(!1),c=t.orientation==="horizontal",u=je(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?d:m)}},10);return J(r.viewport,u),J(r.content,u),e.jsx(Z,{present:o||a,children:e.jsx(Be,{"data-state":a?"visible":"hidden",...n,ref:s})})}),Be=i.forwardRef((t,s)=>{const{orientation:r="vertical",...o}=t,n=V(B,t.__scopeScrollArea),a=i.useRef(null),l=i.useRef(0),[c,u]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=sr(c.viewport,c.content),m={...o,sizes:c,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:x=>a.current=x,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:x=>l.current=x};function h(x,p){return Ms(x,l.current,c,p)}return r==="horizontal"?e.jsx(_s,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&a.current){const x=n.viewport.scrollLeft,p=Ze(x,c,n.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=h(x,n.dir))}}):r==="vertical"?e.jsx(Ts,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&a.current){const x=n.viewport.scrollTop,p=Ze(x,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=h(x))}}):null}),_s=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:o,...n}=t,a=V(B,t.__scopeScrollArea),[l,c]=i.useState(),u=i.useRef(null),d=M(s,u,a.onScrollbarXChange);return i.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(er,{"data-orientation":"horizontal",...n,ref:d,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":we(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(a.viewport){const x=a.viewport.scrollLeft+m.deltaX;t.onWheelScroll(x),nr(x,h)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&l&&o({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:pe(l.paddingLeft),paddingEnd:pe(l.paddingRight)}})}})}),Ts=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:o,...n}=t,a=V(B,t.__scopeScrollArea),[l,c]=i.useState(),u=i.useRef(null),d=M(s,u,a.onScrollbarYChange);return i.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(er,{"data-orientation":"vertical",...n,ref:d,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":we(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(a.viewport){const x=a.viewport.scrollTop+m.deltaY;t.onWheelScroll(x),nr(x,h)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&l&&o({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:pe(l.paddingTop),paddingEnd:pe(l.paddingBottom)}})}})}),[Is,Zt]=Ut(B),er=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:o,hasThumb:n,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:m,onResize:h,...x}=t,p=V(B,r),[j,v]=i.useState(null),S=M(s,C=>v(C)),g=i.useRef(null),w=i.useRef(""),P=p.viewport,b=o.content-o.viewport,R=Q(m),T=Q(u),_=je(h,10);function E(C){if(g.current){const k=C.clientX-g.current.left,A=C.clientY-g.current.top;d({x:k,y:A})}}return i.useEffect(()=>{const C=k=>{const A=k.target;(j==null?void 0:j.contains(A))&&R(k,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[P,j,b,R]),i.useEffect(T,[o,T]),J(j,_),J(p.content,_),e.jsx(Is,{scope:r,scrollbar:j,hasThumb:n,onThumbChange:Q(a),onThumbPointerUp:Q(l),onThumbPositionChange:T,onThumbPointerDown:Q(c),children:e.jsx(L.div,{...x,ref:S,style:{position:"absolute",...x.style},onPointerDown:I(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=j.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:I(t.onPointerMove,E),onPointerUp:I(t.onPointerUp,C=>{const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),xe="ScrollAreaThumb",tr=i.forwardRef((t,s)=>{const{forceMount:r,...o}=t,n=Zt(xe,t.__scopeScrollArea);return e.jsx(Z,{present:r||n.hasThumb,children:e.jsx(Ds,{ref:s,...o})})}),Ds=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:o,...n}=t,a=V(xe,r),l=Zt(xe,r),{onThumbPositionChange:c}=l,u=M(s,h=>l.onThumbChange(h)),d=i.useRef(),m=je(()=>{d.current&&(d.current(),d.current=void 0)},100);return i.useEffect(()=>{const h=a.viewport;if(h){const x=()=>{if(m(),!d.current){const p=Os(h,c);d.current=p,c()}};return c(),h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[a.viewport,m,c]),e.jsx(L.div,{"data-state":l.hasThumb?"visible":"hidden",...n,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:I(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),j=h.clientX-p.left,v=h.clientY-p.top;l.onThumbPointerDown({x:j,y:v})}),onPointerUp:I(t.onPointerUp,l.onThumbPointerUp)})});tr.displayName=xe;var qe="ScrollAreaCorner",rr=i.forwardRef((t,s)=>{const r=V(qe,t.__scopeScrollArea),o=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&o?e.jsx(Ls,{...t,ref:s}):null});rr.displayName=qe;var Ls=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,...o}=t,n=V(qe,r),[a,l]=i.useState(0),[c,u]=i.useState(0),d=!!(a&&c);return J(n.scrollbarX,()=>{var h;const m=((h=n.scrollbarX)==null?void 0:h.offsetHeight)||0;n.onCornerHeightChange(m),u(m)}),J(n.scrollbarY,()=>{var h;const m=((h=n.scrollbarY)==null?void 0:h.offsetWidth)||0;n.onCornerWidthChange(m),l(m)}),d?e.jsx(L.div,{...o,ref:s,style:{width:a,height:c,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function pe(t){return t?parseInt(t,10):0}function sr(t,s){const r=t/s;return isNaN(r)?0:r}function we(t){const s=sr(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-r)*s;return Math.max(o,18)}function Ms(t,s,r,o="ltr"){const n=we(r),a=n/2,l=s||a,c=n-l,u=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-c,m=r.content-r.viewport,h=o==="ltr"?[0,m]:[m*-1,0];return or([u,d],h)(t)}function Ze(t,s,r="ltr"){const o=we(s),n=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=s.scrollbar.size-n,l=s.content-s.viewport,c=a-o,u=r==="ltr"?[0,l]:[l*-1,0],d=_e(t,u);return or([0,l],[0,c])(d)}function or(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const o=(s[1]-s[0])/(t[1]-t[0]);return s[0]+o*(r-t[0])}}function nr(t,s){return t>0&&t<s}var Os=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},o=0;return function n(){const a={left:t.scrollLeft,top:t.scrollTop},l=r.left!==a.left,c=r.top!==a.top;(l||c)&&s(),r=a,o=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(o)};function je(t,s){const r=Q(t),o=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(o.current),[]),i.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(r,s)},[r,s])}function J(t,s){const r=Q(s);ot(()=>{let o=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(r)});return n.observe(t),()=>{window.cancelAnimationFrame(o),n.unobserve(t)}}},[t,r])}function Hs(t,s){const{asChild:r,children:o}=t;if(!r)return typeof s=="function"?s(o):s;const n=i.Children.only(o);return i.cloneElement(n,{children:typeof s=="function"?s(n.props.children):s})}var ar=Xt,Vs=Qt,Fs=rr;const lr=i.forwardRef(({className:t,children:s,...r},o)=>e.jsxs(ar,{ref:o,className:Y("relative overflow-hidden",t),...r,children:[e.jsx(Vs,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(ir,{}),e.jsx(Fs,{})]}));lr.displayName=ar.displayName;const ir=i.forwardRef(({className:t,orientation:s="vertical",...r},o)=>e.jsx($e,{ref:o,orientation:s,className:Y("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(tr,{className:"relative flex-1 rounded-full bg-border"})}));ir.displayName=$e.displayName;function zs({children:t}){const{cartItems:s,removeFromCart:r,updateQuantity:o,subtotal:n,totalItems:a,isCartOpen:l,setIsCartOpen:c,clearCart:u}=nt();return e.jsxs(at,{open:l,onOpenChange:c,children:[e.jsx(lt,{asChild:!0,children:t||e.jsxs(O,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(Se,{className:"h-[1.2rem] w-[1.2rem]"}),a>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:a})]})}),e.jsxs(it,{className:"w-full sm:max-w-md flex flex-col",children:[e.jsx(ct,{className:"space-y-2.5 pr-6",children:e.jsxs(dt,{className:"flex items-center text-lg",children:[e.jsx(Se,{className:"mr-2 h-5 w-5"})," Shopping Cart"]})}),s.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"rounded-full bg-muted h-16 w-16 flex items-center justify-center",children:e.jsx(Se,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("h3",{className:"text-base font-medium",children:"Your cart is empty"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Looks like you haven't added any products to your cart yet."})]}),e.jsx(O,{asChild:!0,children:e.jsx(Ye,{to:"/store",children:"Continue Shopping"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"flex-1 pr-4 -mr-4",children:e.jsx("ul",{className:"space-y-5",children:s.map(d=>e.jsxs("li",{className:"grid grid-cols-[80px,1fr,auto] gap-4",children:[e.jsx("div",{className:"h-20 w-20 overflow-hidden rounded-md border bg-muted",children:d.product.thumbnail?e.jsx("img",{src:d.product.thumbnail,alt:d.product.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-secondary text-secondary-foreground",children:e.jsx("span",{className:"text-xs",children:"No image"})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:d.product.name}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:d.product.sale_price?"line-through text-muted-foreground text-xs mr-2":"",children:de(d.product.price)}),d.product.sale_price&&e.jsx("span",{className:"font-medium text-primary",children:de(d.product.sale_price)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>o(d.id,Math.max(1,d.quantity-1)),children:e.jsx("span",{children:"-"})}),e.jsx("span",{className:"w-8 text-center text-sm",children:d.quantity}),e.jsx(O,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>o(d.id,d.quantity+1),children:e.jsx("span",{children:"+"})})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("button",{onClick:()=>r(d.id),className:"text-muted-foreground hover:text-destructive",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsx("p",{className:"text-sm font-medium",children:de((d.product.sale_price||d.product.price)*d.quantity)})]})]},d.id))})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx(xr,{}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Subtotal"}),e.jsx("span",{className:"text-sm font-medium",children:de(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Shipping"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Calculated at checkout"})]})]}),e.jsx(O,{asChild:!0,className:"w-full",children:e.jsx(Ye,{to:"/checkout",children:"Checkout"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(O,{variant:"ghost",size:"sm",className:"gap-1.5 text-sm",onClick:u,children:[e.jsx(kr,{className:"h-4 w-4"}),e.jsx("span",{children:"Clear Cart"})]})})]})]})]})]})}const no=()=>{const{t}=pr(),{addToCart:s,setIsCartOpen:r}=nt(),{toast:o}=gr(),n=vr(),[a,l]=i.useState([]),[c,u]=i.useState([]),[d,m]=i.useState(!0),[h,x]=i.useState([]),[p,j]=i.useState("all"),[v,S]=i.useState(""),[g,w]=i.useState([0,200]),[P,b]=i.useState("featured"),[R,T]=i.useState(!1),[_,E]=i.useState(1),[C,k]=i.useState(1),A=9;i.useEffect(()=>{const f=async()=>{try{m(!0);let y=W.from("store_products").select("*");switch(p!=="all"&&(y=y.eq("category_id",p)),v&&(y=y.ilike("name",`%${v}%`)),y=y.gte("price",g[0]).lte("price",g[1]),R&&(y=y.gt("stock",0)),P){case"price-low":y=y.order("price",{ascending:!0});break;case"price-high":y=y.order("price",{ascending:!1});break;case"newest":y=y.order("created_at",{ascending:!1});break;case"rating":y=y.order("rating",{ascending:!1});break;default:y=y.order("featured",{ascending:!1});break}const $=W.from("store_products").select("*",{count:"exact",head:!0});p!=="all"&&$.eq("category_id",p),v&&$.ilike("name",`%${v}%`),$.gte("price",g[0]).lte("price",g[1]),R&&$.gt("stock",0);const{count:ie,error:ce}=await $;if(ce)throw ce;const cr=Math.ceil((ie||0)/A);k(cr||1);const We=(_-1)*A,dr=We+A-1;y=y.range(We,dr);const{data:ur,error:Ke}=await y;if(Ke)throw Ke;l(ur)}catch(y){he.error("Error fetching products",{error:y}),o({title:"Error",description:"Failed to load products",variant:"destructive"})}finally{m(!1)}},N=async()=>{try{const{data:y,error:$}=await W.from("store_categories").select("*").order("name");if($)throw $;u(y)}catch(y){he.error("Error fetching categories",{error:y})}},D=async()=>{try{const{data:{user:y}}=await W.auth.getUser();if(y){const{data:$,error:ie}=await W.from("store_wishlist").select("product_id").eq("user_id",y.id);if(ie)throw ie;x($.map(ce=>ce.product_id))}}catch(y){he.error("Error fetching wishlist",{error:y})}};f(),N(),D()},[p,v,g,P,R,_,o]);const F=async f=>{try{const{data:{user:N}}=await W.auth.getUser();if(!N){o({title:"Login Required",description:"Please log in to add items to your wishlist",variant:"destructive"});return}h.includes(f)?(await W.from("store_wishlist").delete().eq("user_id",N.id).eq("product_id",f),x(h.filter(y=>y!==f)),o({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})):(await W.from("store_wishlist").insert({user_id:N.id,product_id:f}),x([...h,f]),o({title:"Added to Wishlist",description:"Item has been added to your wishlist"}))}catch(N){he.error("Error updating wishlist",{error:N}),o({title:"Error",description:"Failed to update wishlist",variant:"destructive"})}},z=()=>{j("all"),S(""),w([0,200]),b("featured"),T(!1),E(1)},le=f=>{s(f,1)},U=f=>{n(`/store/product/${f}`)},X=f=>e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(N=>e.jsx(Hr,{className:`w-4 h-4 ${N<=Math.round(f)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},N)),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:f.toFixed(1)})]});return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:t("store.title")}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:t("store.description")})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-auto md:min-w-[300px]",children:[e.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(wr,{placeholder:t("store.searchProducts"),className:"pl-10",value:v,onChange:f=>{S(f.target.value),E(1)}})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs(Pr,{value:P,onValueChange:f=>{b(f),E(1)},children:[e.jsx(Rr,{className:"w-full md:w-[180px]",children:e.jsx(Ar,{placeholder:t("store.sort")})}),e.jsxs(Er,{children:[e.jsx(te,{value:"featured",children:t("store.sortFeatured")}),e.jsx(te,{value:"price-low",children:t("store.sortPriceLow")}),e.jsx(te,{value:"price-high",children:t("store.sortPriceHigh")}),e.jsx(te,{value:"newest",children:t("store.sortNewest")}),e.jsx(te,{value:"rating",children:t("store.sortRating")})]})]}),e.jsxs(at,{children:[e.jsx(lt,{asChild:!0,children:e.jsx(O,{variant:"outline",size:"icon",className:"md:hidden",children:e.jsx(Or,{className:"h-4 w-4"})})}),e.jsxs(it,{side:"left",children:[e.jsx(ct,{children:e.jsx(dt,{children:t("store.filters")})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-3",children:t("store.categories")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:"all-mobile",checked:p==="all",onCheckedChange:()=>{j("all"),E(1)}}),e.jsx("label",{htmlFor:"all-mobile",className:"ml-2 text-sm",children:t("store.allCategories")})]}),c.map(f=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:`category-${f.id}-mobile`,checked:p===f.id,onCheckedChange:()=>{j(f.id),E(1)}}),e.jsx("label",{htmlFor:`category-${f.id}-mobile`,className:"ml-2 text-sm",children:f.name})]},f.id))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-3",children:t("store.priceRange")}),e.jsxs("div",{className:"px-2",children:[e.jsx(Ae,{defaultValue:g,min:0,max:200,step:1,onValueChange:f=>{w(f),E(1)}}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsxs("span",{children:["$",g[0]]}),e.jsxs("span",{children:["$",g[1]]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:"in-stock-mobile",checked:R,onCheckedChange:f=>{T(!!f),E(1)}}),e.jsx("label",{htmlFor:"in-stock-mobile",className:"ml-2",children:t("store.inStockOnly")})]})}),e.jsx(O,{variant:"outline",className:"w-full",onClick:z,children:t("store.resetFilters")})]})})]})]}),e.jsx(O,{variant:"outline",size:"icon",onClick:()=>r(!0),children:e.jsx(jr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[e.jsx("div",{className:"hidden md:block col-span-3 space-y-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium",children:t("store.filters")}),e.jsx(O,{variant:"ghost",size:"sm",onClick:z,className:"h-8 px-2 text-xs",children:t("store.resetFilters")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:t("store.categories")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:"all",checked:p==="all",onCheckedChange:()=>{j("all"),E(1)}}),e.jsx("label",{htmlFor:"all",className:"ml-2 text-sm",children:t("store.allCategories")})]}),c.map(f=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:`category-${f.id}`,checked:p===f.id,onCheckedChange:()=>{j(f.id),E(1)}}),e.jsx("label",{htmlFor:`category-${f.id}`,className:"ml-2 text-sm",children:f.name})]},f.id))]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:t("store.priceRange")}),e.jsxs("div",{className:"px-2",children:[e.jsx(Ae,{defaultValue:g,min:0,max:200,step:1,onValueChange:f=>{w(f),E(1)}}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsxs("span",{children:["$",g[0]]}),e.jsxs("span",{children:["$",g[1]]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{id:"in-stock",checked:R,onCheckedChange:f=>{T(!!f),E(1)}}),e.jsx("label",{htmlFor:"in-stock",className:"ml-2 text-sm",children:t("store.inStockOnly")})]})})]})]})}),e.jsx("div",{className:"col-span-12 md:col-span-9",children:d?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(f=>e.jsxs(Ue,{className:"overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-100 animate-pulse"}),e.jsxs(Xe,{children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-100 animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-100 animate-pulse"})]}),e.jsx(Ge,{children:e.jsx("div",{className:"h-5 w-1/4 bg-gray-100 animate-pulse"})}),e.jsx(Qe,{children:e.jsx("div",{className:"h-9 w-full bg-gray-100 animate-pulse"})})]},f))}):a.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:t("store.noProductsFound")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:t("store.tryDifferentFilters")}),e.jsx(O,{onClick:z,children:t("store.resetFilters")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(f=>e.jsxs(Ue,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative h-64 cursor-pointer",onClick:()=>U(f.id),children:[e.jsx("img",{src:f.thumbnail,alt:f.name,className:"object-cover w-full h-full"}),e.jsx("button",{onClick:N=>{N.stopPropagation(),F(f.id)},className:"absolute top-2 right-2 p-1.5 bg-white rounded-full shadow-sm hover:bg-gray-100","aria-label":h.includes(f.id)?"Remove from wishlist":"Add to wishlist",children:h.includes(f.id)?e.jsx(Je,{className:"h-4 w-4 text-red-500"}):e.jsx(Je,{className:"h-4 w-4"})}),f.is_new&&e.jsx(ue,{variant:"secondary",className:"absolute top-2 left-2",children:t("store.newProduct")}),f.is_bestseller&&e.jsx(ue,{variant:"default",className:"absolute top-2 left-2",children:t("store.bestSeller")}),f.sale_price&&e.jsxs(ue,{variant:"destructive",className:"absolute top-2 left-2",children:["-",Math.round((1-f.sale_price/f.price)*100),"%"]})]}),e.jsxs(Xe,{className:"cursor-pointer",onClick:()=>U(f.id),children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(Sr,{className:"text-lg line-clamp-1",children:f.name})}),e.jsx(Cr,{className:"line-clamp-2",children:f.description})]}),e.jsxs(Ge,{className:"cursor-pointer",onClick:()=>U(f.id),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:f.sale_price?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:["$",f.sale_price.toFixed(2)]}),e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",f.price.toFixed(2)]})]}):e.jsxs("span",{className:"text-lg font-bold",children:["$",f.price.toFixed(2)]})}),f.rating&&e.jsx("div",{className:"flex items-center",children:X(f.rating)})]}),e.jsx(ue,{variant:"outline",className:"mt-2",children:f.stock>0?`${f.stock} ${t("store.inStock")}`:t("store.outOfStock")})]}),e.jsx(Qe,{children:e.jsx(O,{className:"w-full",disabled:f.stock===0,onClick:N=>{N.stopPropagation(),le(f)},children:t("store.addToCart")})})]},f.id))}),C>1&&e.jsx(_r,{className:"mt-8",children:e.jsxs(Tr,{children:[e.jsx(fe,{children:e.jsx(Ir,{onClick:()=>E(f=>Math.max(f-1,1)),disabled:_===1})}),Array.from({length:Math.min(5,C)},(f,N)=>{let D=null;return C<=5?D=N+1:N===0?D=1:N===4?D=C:_<=2?D=N+1:_>=C-1?D=C-4+N:D=_-1+N,C>5&&(N===1&&_>3||N===3&&_<C-2)?e.jsx(fe,{children:e.jsx(Dr,{})},N):D!==null?e.jsx(fe,{children:e.jsx(Lr,{isActive:_===D,onClick:()=>E(D),children:D})},N):null}),e.jsx(fe,{children:e.jsx(Mr,{onClick:()=>E(f=>Math.min(f+1,C)),disabled:_===C})})]})})]})})]}),e.jsx("div",{className:"mt-16",children:e.jsxs(yr,{defaultValue:"faq",children:[e.jsxs(Nr,{className:"justify-center",children:[e.jsx(Ce,{value:"faq",children:t("store.faq")}),e.jsx(Ce,{value:"shipping",children:t("store.shipping")}),e.jsx(Ce,{value:"returns",children:t("store.returns")})]}),e.jsx(ye,{value:"faq",className:"mt-6",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(Ps,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(re,{value:"faq-1",children:[e.jsx(se,{children:t("store.faq.q1")}),e.jsx(oe,{children:t("store.faq.a1")})]}),e.jsxs(re,{value:"faq-2",children:[e.jsx(se,{children:t("store.faq.q2")}),e.jsx(oe,{children:t("store.faq.a2")})]}),e.jsxs(re,{value:"faq-3",children:[e.jsx(se,{children:t("store.faq.q3")}),e.jsx(oe,{children:t("store.faq.a3")})]}),e.jsxs(re,{value:"faq-4",children:[e.jsx(se,{children:t("store.faq.q4")}),e.jsx(oe,{children:t("store.faq.a4")})]})]})})}),e.jsx(ye,{value:"shipping",className:"mt-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto prose",children:[e.jsx("h3",{children:t("store.shipping.title")}),e.jsx("p",{children:t("store.shipping.description")}),e.jsxs("ul",{children:[e.jsx("li",{children:t("store.shipping.point1")}),e.jsx("li",{children:t("store.shipping.point2")}),e.jsx("li",{children:t("store.shipping.point3")})]})]})}),e.jsx(ye,{value:"returns",className:"mt-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto prose",children:[e.jsx("h3",{children:t("store.returns.title")}),e.jsx("p",{children:t("store.returns.description")}),e.jsxs("ul",{children:[e.jsx("li",{children:t("store.returns.point1")}),e.jsx("li",{children:t("store.returns.point2")}),e.jsx("li",{children:t("store.returns.point3")})]})]})})]})}),e.jsx(zs,{})]})};export{no as default};
